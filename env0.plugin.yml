name: OPA-exec
icon: https://cncf-branding.netlify.app/img/projects/opa/stacked/color/opa-stacked-color.png
inputs:
  flags:
    description: Additional OPA exec flags
  decision:
    description: Policy decision to evaluate
  path:
    description: Path to OPA input file(s)
    required: true

run:
  exec: |
    curl -L -o opa https://openpolicyagent.org/downloads/v0.46.1/opa_linux_amd64_static
    chmod 755 ./opa
    ./opa exec --decision ${inputs.decision} ${inputs.flags} ${inputs.path}
